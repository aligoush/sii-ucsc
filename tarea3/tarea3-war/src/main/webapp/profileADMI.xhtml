<ui:composition template="/WEB-INF/templates/plantilla.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough" 
                                xmlns:p="http://primefaces.org/ui"
                
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="title">Editar perfil</ui:define>
    <ui:define name="content">


<c:choose>
<c:when test="#{controlAutorizacion.usuario.tipoUsuario=='ADMINISTRADOR'}">

<h:form>			
            <div class="container-fluid">
                <h3 class="text-dark mb-4">Perfil</h3>
                <div class="row mb-3">
                    <div class="col-lg-4">
                    
                    <!-- FOTO -->
                        <div class="card mb-3" style="height: 397px;">
                            <div class="card-body text-center shadow" style=" border-top-width: 10px; margin-top: 10px; margin-bottom: 10px; height: 235px">
                                <h:graphicImage value="/rs/imagenes/usuario/#{controlAutorizacion.usuario.id}" style="width:240px;; margin-top:30px; margin-bottom:10px; height:240px; margin-bottom-width:20px;"/>
                            		   <div class="mb-3">
                                		<p:fileUpload id="imagen" value="#{controlAutorizacion.imagenSubida}" allowTypes="/(\.|\/)(jpe?g)$/" mode="simple"  label="Elegir" style="width:280px; margin-right:5px;margin-bottom:5px;margin-top:3px;margin-left:44px;" />
                            			  <h:commandButton value="Cambiar imagen" action="#{controlAutorizacion.doEditarPerfil()}" styleClass="btn btn-primary" style="height:35px; "/> 
                            		  </div>
<!--                             	  </h:form> -->
                            </div>
                        </div>

<!-- NOTI -->

              <div class="card shadow mb-4" style="height:232px;">
                   <div class="card-header py-3">
                        <p class="text-primary m-0 font-weight-bold">Noticaciones</p>
              	   </div>
              	   <div class="card-body" style="height: 325px;">
                  	   <div class="row">
                     	   <div class="col-md-14">
                          	    
                               	    <div class="form-group" style="margin-top: 5px;"><label for="signature"><strong>Aviso a correo electrónico</strong></label></div>
                            		<div class="form-group">
                                		<div class="custom-control custom-switch" style="padding-left:20px">
											<p:toggleSwitch value="#{controlAutorizacion.usuario.notificacionesCorreo}" />
                                  		 			<label ><strong>Enviar correo electrónico por cada nueva notificación</strong></label>
                                  		 </div>
                               		</div>
 									
                           	    
                       	  </div>
                   	  </div>
                  </div>
           	   </div>
            
  </div>
                
                <!-- TERMINA NOTIFICACIONES -->
                <div class="col-lg-8">
                  
                    <div class="row">
                        <div class="col">
                        
                        
                        <!-- CONFI USUARIO -->
                            <div class="card shadow mb-3">
                                <div class="card-header py-3">
                                    <p class="text-primary m-0 font-weight-bold">Configuración del usuario</p>
                                </div>
                            <div class="card-body">
                                    
                                        <div class="form-row">
                                            <div class="col">
                                                <div class="form-group"><label for="username"><strong>NIF</strong></label>
                                             		 <h:inputText  class="form-control" id="dni" value="#{controlAutorizacion.usuario.dni}" required="true" a:placeholder="nif" />
                                             	 </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group"><label for="email"><strong>Correo electrónico</strong></label>
                                             		 <h:inputText  class="form-control" id="email" value="#{controlAutorizacion.usuario.email}" required="true" a:placeholder="user@example.com" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="col">
                                                <div class="form-group"><label for="first_name"><strong>Nombre</strong></label>
                                                	<h:inputText class="form-control" id="nombre" value="#{controlAutorizacion.usuario.nombre}" required="true"  a:placeholder="name"/>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group"><label for="first_name"><strong>Primer apellido</strong></label>
                                               		 <h:inputText class="form-control" id="apellido1"  value="#{controlAutorizacion.usuario.apellido1}" required="true" a:placeholder="first name" />
                                               </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group"><label for="last_name"><strong>Segundo apellido</strong></label>
                                                    <h:inputText  class="form-control" id="apellido2"  value="#{controlAutorizacion.usuario.apellido1}" required="true" a:placeholder="second name" />
                                               </div>
                                            </div>
                                        </div>
                                       <div class="form-row">
                                            <div class="col">
                                                <div class="form-group"><label for="first_name"><strong>Contraseña</strong></label>
                                                	<h:inputSecret class="form-control" id="contrasena1" value="#{controlAutorizacion.nuevaContrasena}" required="false" a:placeholder="new password" />
                                                </div>
                                            </div>
                                             <div class="col">
                                                <div class="form-group"><label for="first_name"><strong>Validar contraseña</strong></label>
                                               		 <h:inputSecret  class="form-control" id="contrasena2" value="#{controlAutorizacion.repeticionContrasena}" required="false" a:placeholder="repeat password"/>
                                           		  </div>
                                        	</div>
                                        </div>
                                        
                          
                                </div>
                            </div>
                            
                            <!-- DATOS CONTACTO -->
                            
                            <div class="card shadow">
                                <div class="card-header py-3">
                                    <p class="text-primary m-0 font-weight-bold">Datos de contacto</p>
                                </div>
                              <div class="card-body">
                                    
                                        <div class="form-group"><label for="address"><strong>Dirección</strong></label>
                                             <h:inputText class="form-control" id="direccion" value="#{controlAutorizacion.usuario.direccion}" required="true" a:placeholder="38,Sunset Blvd"/>
                                       </div>
                                        <div class="form-row">
                                            <div class="col">
                                                <div class="form-group"><label for="city"><strong>Teléfono</strong></label>
                                                   <h:inputText class="form-control"  id="telefono" value="#{controlAutorizacion.usuario.telefono}" required="true" a:placeholder="phone number"/>
                                                </div>
                                            </div>
                                        </div>
 										
                                    
                                </div>
                            </div>
                            <!-- TERMINA DATOS CONTACTO -->
               </div>
            </div> <!-- ROW DE DESPIES DE COL -->
        </div><!-- COL DE DESPUES DE NOTI -->
     </div> <!-- ROW -->
       
            <div class="text-center ">
                 <h:commandButton value="Guardar Cambios" action="#{controlAutorizacion.doEditarPerfil()}" styleClass="btn btn-primary" style="height:35px;" />  
			</div>
          </div> <!-- CONTAINER FLUID -->
  </h:form>        


</c:when>
<c:otherwise>
		<h3 class="text-dark mb-4">ERROR DE AUTORIZACIÓN</h3>
		<p>No tiene permiso para acceder a esta página</p>
</c:otherwise>
</c:choose>

    </ui:define>
</ui:composition>