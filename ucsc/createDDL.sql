CREATE TABLE USUARIO (DNI VARCHAR(10) NOT NULL, APELLIDO1 VARCHAR(20) NOT NULL, APELLIDO2 VARCHAR(20), CONTRASENA VARCHAR(20) NOT NULL, CURSOACTUAL INTEGER, DIRECCION VARCHAR(50) NOT NULL, DISPONIBILIDAD VARCHAR(15) NOT NULL, DISTANCIAMAX INTEGER, EMAIL VARCHAR(50) NOT NULL, IMAGEN VARCHAR(512) NOT NULL, NOMBRE VARCHAR(20) NOT NULL, TELEFONO VARCHAR(15) NOT NULL, TIPOUSUARIO VARCHAR(30) NOT NULL, PRIMARY KEY (DNI))
CREATE TABLE SOLICITUD (IDSOLICITUD INTEGER AUTO_INCREMENT NOT NULL, ESTADOSOLICITUD VARCHAR(50) NOT NULL, FECHA DATE NOT NULL, ACTIVIDAD_IDACTIVIDAD INTEGER, USUARIO_DNI VARCHAR(10), PRIMARY KEY (IDSOLICITUD))
CREATE TABLE VALORACION (IDVALORACION BIGINT AUTO_INCREMENT NOT NULL, COMENTARIO VARCHAR(512), VALORACIONNUM INTEGER NOT NULL, ACTIVIDAD_IDACTIVIDAD INTEGER, USUARIO_DNI VARCHAR(10), PRIMARY KEY (IDVALORACION))
CREATE TABLE ACTIVIDAD (IDACTIVIDAD INTEGER AUTO_INCREMENT NOT NULL, DESCRIPCION VARCHAR(512) NOT NULL, FECHAFIN DATE, FECHAINICIO DATE, IMAGEN VARCHAR(255), NOMBRE VARCHAR(50) NOT NULL, NUMHORASREQUERIDAS INTEGER, NUMPERSONASREQUERIDAS INTEGER NOT NULL, TIPO VARCHAR(50), UBICACION VARCHAR(100) NOT NULL, VALIDACION TINYINT(1) default 0 NOT NULL, PROYECTO_IDPROYECTO INTEGER, PRIMARY KEY (IDACTIVIDAD))
CREATE TABLE NOTIFICACION (IDNOTIFICACION INTEGER AUTO_INCREMENT NOT NULL, DESCRIPCION VARCHAR(512) NOT NULL, TITULO VARCHAR(50) NOT NULL, USUARIO_DNI VARCHAR(10), PRIMARY KEY (IDNOTIFICACION))
CREATE TABLE PROYECTO (IDPROYECTO INTEGER AUTO_INCREMENT NOT NULL, DESCRIPCION VARCHAR(512), IMAGEN VARCHAR(255), NOMBRE VARCHAR(50) NOT NULL, ORGANIZACION_DNI VARCHAR(10), PRIMARY KEY (IDPROYECTO))
CREATE TABLE MATRICULACION (FECHAFIN DATE, TITULACION_IDTITULACION INTEGER NOT NULL, USUARIO_DNI VARCHAR(10) NOT NULL, PRIMARY KEY (TITULACION_IDTITULACION, USUARIO_DNI))
CREATE TABLE TITULACION (IDTITULACION INTEGER AUTO_INCREMENT NOT NULL, NOMBRETITULACION VARCHAR(30) NOT NULL, PRIMARY KEY (IDTITULACION))
CREATE TABLE EVALUACION (NOTA INTEGER NOT NULL, ACTIVIDAD_IDACTIVIDAD INTEGER NOT NULL, ALUMNO_EVALUADO_DNI VARCHAR(10) NOT NULL, PROFESOR_EVALUADOR_DNI VARCHAR(10), PRIMARY KEY (ACTIVIDAD_IDACTIVIDAD, ALUMNO_EVALUADO_DNI))
CREATE TABLE Coordinar (usuario_id VARCHAR(10) NOT NULL, actividad_id INTEGER NOT NULL, PRIMARY KEY (usuario_id, actividad_id))
ALTER TABLE SOLICITUD ADD CONSTRAINT FK_SOLICITUD_ACTIVIDAD_IDACTIVIDAD FOREIGN KEY (ACTIVIDAD_IDACTIVIDAD) REFERENCES ACTIVIDAD (IDACTIVIDAD)
ALTER TABLE SOLICITUD ADD CONSTRAINT FK_SOLICITUD_USUARIO_DNI FOREIGN KEY (USUARIO_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE VALORACION ADD CONSTRAINT FK_VALORACION_USUARIO_DNI FOREIGN KEY (USUARIO_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE VALORACION ADD CONSTRAINT FK_VALORACION_ACTIVIDAD_IDACTIVIDAD FOREIGN KEY (ACTIVIDAD_IDACTIVIDAD) REFERENCES ACTIVIDAD (IDACTIVIDAD)
ALTER TABLE ACTIVIDAD ADD CONSTRAINT FK_ACTIVIDAD_PROYECTO_IDPROYECTO FOREIGN KEY (PROYECTO_IDPROYECTO) REFERENCES PROYECTO (IDPROYECTO)
ALTER TABLE NOTIFICACION ADD CONSTRAINT FK_NOTIFICACION_USUARIO_DNI FOREIGN KEY (USUARIO_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE PROYECTO ADD CONSTRAINT FK_PROYECTO_ORGANIZACION_DNI FOREIGN KEY (ORGANIZACION_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE MATRICULACION ADD CONSTRAINT FK_MATRICULACION_TITULACION_IDTITULACION FOREIGN KEY (TITULACION_IDTITULACION) REFERENCES TITULACION (IDTITULACION)
ALTER TABLE MATRICULACION ADD CONSTRAINT FK_MATRICULACION_USUARIO_DNI FOREIGN KEY (USUARIO_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE EVALUACION ADD CONSTRAINT FK_EVALUACION_ALUMNO_EVALUADO_DNI FOREIGN KEY (ALUMNO_EVALUADO_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE EVALUACION ADD CONSTRAINT FK_EVALUACION_PROFESOR_EVALUADOR_DNI FOREIGN KEY (PROFESOR_EVALUADOR_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE EVALUACION ADD CONSTRAINT FK_EVALUACION_ACTIVIDAD_IDACTIVIDAD FOREIGN KEY (ACTIVIDAD_IDACTIVIDAD) REFERENCES ACTIVIDAD (IDACTIVIDAD)
ALTER TABLE Coordinar ADD CONSTRAINT FK_Coordinar_actividad_id FOREIGN KEY (actividad_id) REFERENCES ACTIVIDAD (IDACTIVIDAD)
ALTER TABLE Coordinar ADD CONSTRAINT FK_Coordinar_usuario_id FOREIGN KEY (usuario_id) REFERENCES USUARIO (DNI)
